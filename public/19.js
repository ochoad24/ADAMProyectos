webpackJsonp([19],{615:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(28),r=(i.n(a),i(228)),n=i.n(r);e.default={name:"Organizacion",data:function(){return{dialog:!1,ornameRules:[function(t){return!!t||"El nombre de la organizacion no puede estar vacio"},function(t){return t&&t.length<=149||"El titulo del proyecto no puede ser mayor a 150"}],munnameRules:[function(t){return!!t||"El nombre del municipio no puede estar vacio"},function(t){return t&&t.length<=149||"El nombre del municipio no puede ser mayor a 150"}],error:0,select:[],errorMsj:[],departamentos:[],search:"",IdOrganizacion:0,IdDepartamento:-1,editar:0,headers:[{text:"Nombre",align:"left",value:"nombre"},{text:"Departamento",align:"right",value:"departamento"},{text:"Municipio",align:"right",value:"municipio"},{text:"Comunidad",align:"right",value:"comunidad"}],municipio:"",nombre:"",comunidad:"",organizaciones:[],editedIndex:-1}},computed:{formTitle:function(){return 0===this.editar?"Nuevo Proyecto":"Editar Proyecto"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.cargaDepartamentos(),this.initialize()},methods:{initialize:function(){this.dialog=!1;var t=this;n.a.get("/org").then(function(e){console.log("busqueda");var i=e.data;t.organizaciones=i}).catch(function(t){console.log(t.response)})},cargaDepartamentos:function(){var t=this;n.a.get("/org/dept").then(function(e){t.departamentos=e.data}).catch(function(t){console.log(t.response)})},validate:function(){return this.error=0,this.errorMsj=[],this.nombre||this.errorMsj.push("El nombre de la organización no puede estar vacio"),this.municipio||this.errorMsj.push("El municipio no puede estar vacío"),this.select.length>0&&this.errorMsj.push("Por favor seleccione un departamento"),this.errorMsj.length?this.error=1:this.error=0,this.error},registrarOrganizacion:function(){var t=this;1!==this.validate()&&(this.IdDepartamento=this.select.id,n.a.post("org/registrar",{nombre:t.nombre,municipio:t.municipio,IdDepartamento:t.select.id,comunidad:t.comunidad}).then(function(e){console.log(e.data),swal.fire({type:"success",title:"Organización registrada!",showConfirmButton:!1,timer:1500}),t.close(),t.initialize()}).catch(function(e){console.log(e.response),swal.fire({type:"error",title:"Se ha producido un error!",text:"Error al registrar organización: "+e.response.data.message}),t.close()}))},editarOrganizacion:function(){var t=this;1!==this.validate()&&n.a.put("/org/actualizar",{id:t.IdOrganizacion,nombre:t.nombre,municipio:t.municipio,comunidad:t.comunidad,IdDepartamento:t.select.id}).then(function(e){swal.fire({type:"success",title:"Organización editada!",showConfirmButton:!1,timer:1500}),t.initialize(),t.close()}).catch(function(e){console.log(e.response),swal.fire({type:"error",title:"Se ha producido un error!",text:"Error al editar organización: "+e.response.data.message}),t.close()})},abrirEditar:function(t){this.editar=1,this.IdOrganizacion=t.IdOrganizacion,this.dialog=!0,this.nombre=t.nombre,this.comunidad=t.comunidad,this.municipio=t.municipio},deleteItem:function(t){console.log(t);var e=this;swal.fire({title:"¿Quieres eliminar esta organización?",text:"Esta acción no se podrá revertir",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(function(i){i.value&&n.a.put("/org/delete",{id:t}).then(function(t){console.log(t.data),swal.fire({type:"success",title:"Organización Eliminada",showConfirmButton:!1,timer:1500}),e.initialize()}).catch(function(t){console.log("catch encontrado"),console.log(t),swal.fire({type:"error",title:"Error al eliminar organización: "+t.response.data.message,showConfirmButton:!0})})})},close:function(){this.dialog=!1,this.editar=0,this.IdDepartamento=0,this.IdOrganizacion=0,this.nombre="",this.municipio="",this.comunidad="",this.select=[],this.error=0,this.errorMsj=[]}}}},616:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row user-list"},[i("div",{staticClass:"col-lg-12"},[i("b-card",{staticClass:"bg-primary-card",attrs:{header:"Usuarios","header-tag":"h4"}},[i("div",{staticClass:"table-responsive"},[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),i("v-dialog",{attrs:{persistent:"","max-width":"650px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-btn",t._g({staticClass:"mb-2",attrs:{dark:"",color:"#668c2d"},on:{click:function(e){t.editar=0}}},a),[t._v("Agregar\n                                Organización")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),i("v-card",[i("v-toolbar",{attrs:{dark:"",color:"#668c2d"}},[i("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog2=!1}}},[i("v-icon",{attrs:{col:"white"}},[t._v("clear")])],1),t._v(" "),i("v-toolbar-title",[t._v("Nueva Organizacion")])],1),t._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Nombre de la organización",maxlength:"150",required:"",rules:t.ornameRules,counter:150},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{hint:""+t.select.departamento,items:t.departamentos,"item-text":"departamento","item-value":"id",label:"Seleccionar departamento","persistent-hint":"","return-object":"","single-line":""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Municipio de ubucación de la organización",maxlength:"150",required:"",rules:t.munnameRules,counter:150},model:{value:t.municipio,callback:function(e){t.municipio=e},expression:"municipio"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Ingrese comunidad"},model:{value:t.comunidad,callback:function(e){t.comunidad=e},expression:"comunidad"}})],1)],1)],1)],1),t._v(" "),t.error?[i("v-divider"),t._v(" "),i("div",{staticClass:"text-xs-center"},[t._l(t.errorMsj,function(e){return i("strong",{key:e,staticClass:"red--text text--lighten-1",domProps:{textContent:t._s(e)}})}),t._v(" "),i("br")],2),t._v(" "),i("v-divider")]:t._e(),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"#668c2d",flat:""},on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),0===t.editar?i("v-btn",{attrs:{color:"#668c2d",flat:""},on:{click:t.registrarOrganizacion}},[t._v("\n                                    Guardar")]):t._e(),t._v(" "),1===t.editar?i("v-btn",{attrs:{color:"#668c2d",flat:""},on:{click:function(e){return t.editarOrganizacion()}}},[t._v("\n                                    Guardar")]):t._e()],1)],2)],1)],1),t._v(" "),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.organizaciones,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.nombre))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.departamento))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.municipio))]),t._v(" "),i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.comunidad))]),t._v(" "),i("td",{staticClass:"justify-center layout px-0"},[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){return t.abrirEditar(e.item)}}},[t._v("\n                                edit\n                            ")]),t._v(" "),i("v-icon",{attrs:{small:""},on:{click:function(i){return t.deleteItem(e.item.IdOrganizacion)}}},[t._v("\n                                delete\n                            ")])],1)]}},{key:"no-data",fn:function(){return[i("v-btn",{staticClass:"mb-2",attrs:{color:"#668c2d",dark:""},on:{click:t.initialize}},[t._v("Recargar")])]},proxy:!0},{key:"no-results",fn:function(){return[i("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v('\n                            No hay resultados de "'+t._s(t.search)+'".\n                        ')])]},proxy:!0}])})],1)])],1)])},staticRenderFns:[]}},699:function(t,e,i){var a=i(44)(i(615),i(616),!1,null,null,null);t.exports=a.exports}});